# AuthZ æ¨¡å—ç›®å½•æ ‘

## å®Œæ•´ç›®å½•ç»“æ„

```text
internal/apiserver/modules/authz/
â”‚
â”œâ”€â”€ domain/                                      # ğŸ›ï¸ é¢†åŸŸå±‚ï¼ˆæ ¸å¿ƒä¸šåŠ¡é€»è¾‘ï¼‰
â”‚   â”‚
â”‚   â”œâ”€â”€ role/                                    # è§’è‰²èšåˆæ ¹
â”‚   â”‚   â”œâ”€â”€ role.go                              # è§’è‰²å®ä½“ + å€¼å¯¹è±¡
â”‚   â”‚   â””â”€â”€ port/driven/
â”‚   â”‚       â””â”€â”€ repo.go                          # è§’è‰²ä»“å‚¨æ¥å£
â”‚   â”‚
â”‚   â”œâ”€â”€ assignment/                              # èµ‹æƒèšåˆæ ¹
â”‚   â”‚   â”œâ”€â”€ assignment.go                        # èµ‹æƒå®ä½“ + å€¼å¯¹è±¡
â”‚   â”‚   â””â”€â”€ port/driven/
â”‚   â”‚       â””â”€â”€ repo.go                          # èµ‹æƒä»“å‚¨æ¥å£
â”‚   â”‚
â”‚   â”œâ”€â”€ resource/                                # èµ„æºèšåˆæ ¹
â”‚   â”‚   â”œâ”€â”€ resource.go                          # èµ„æºå®ä½“
â”‚   â”‚   â”œâ”€â”€ action.go                            # åŠ¨ä½œå€¼å¯¹è±¡ï¼ˆé¢„å®šä¹‰æšä¸¾ï¼‰
â”‚   â”‚   â””â”€â”€ port/driven/
â”‚   â”‚       â””â”€â”€ repo.go                          # èµ„æºä»“å‚¨æ¥å£
â”‚   â”‚
â”‚   â””â”€â”€ policy/                                  # ç­–ç•¥èšåˆæ ¹
â”‚       â”œâ”€â”€ policy_version.go                    # ç­–ç•¥ç‰ˆæœ¬å®ä½“
â”‚       â”œâ”€â”€ rule.go                              # ç­–ç•¥è§„åˆ™å€¼å¯¹è±¡ï¼ˆp/g è§„åˆ™ï¼‰
â”‚       â””â”€â”€ port/driven/
â”‚           â”œâ”€â”€ repo.go                          # ç‰ˆæœ¬ä»“å‚¨æ¥å£
â”‚           â””â”€â”€ casbin.go                        # Casbin æ“ä½œæ¥å£
â”‚
â”œâ”€â”€ application/                                 # ğŸ¯ åº”ç”¨å±‚ï¼ˆç”¨ä¾‹ç¼–æ’ PAPï¼‰
â”‚   â”œâ”€â”€ role/
â”‚   â”‚   â””â”€â”€ service.go                           # è§’è‰²ç®¡ç†æœåŠ¡
â”‚   â”œâ”€â”€ assignment/
â”‚   â”‚   â””â”€â”€ service.go                           # èµ‹æƒç®¡ç†æœåŠ¡ï¼ˆg è§„åˆ™ï¼‰
â”‚   â”œâ”€â”€ policy/
â”‚   â”‚   â””â”€â”€ service.go                           # ç­–ç•¥ç®¡ç†æœåŠ¡ï¼ˆp è§„åˆ™ï¼‰
â”‚   â”œâ”€â”€ resource/
â”‚   â”‚   â””â”€â”€ service.go                           # èµ„æºç›®å½•ç®¡ç†æœåŠ¡
â”‚   â””â”€â”€ version/
â”‚       â””â”€â”€ service.go                           # ç‰ˆæœ¬ç®¡ç† + å¹¿æ’­æœåŠ¡
â”‚
â”œâ”€â”€ infra/                                       # ğŸ”§ åŸºç¡€è®¾æ–½å±‚ï¼ˆPRP + æŠ€æœ¯å®ç°ï¼‰
â”‚   â”‚
â”‚   â”œâ”€â”€ mysql/                                   # MySQL æŒä¹…åŒ–å®ç°
â”‚   â”‚   â”œâ”€â”€ role/
â”‚   â”‚   â”‚   â”œâ”€â”€ po.go                            # RolePO æŒä¹…åŒ–å¯¹è±¡
â”‚   â”‚   â”‚   â”œâ”€â”€ mapper.go                        # BO â†” PO è½¬æ¢å™¨
â”‚   â”‚   â”‚   â””â”€â”€ repo.go                          # RoleRepository å®ç°
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ assignment/
â”‚   â”‚   â”‚   â”œâ”€â”€ po.go                            # AssignmentPO
â”‚   â”‚   â”‚   â”œâ”€â”€ mapper.go
â”‚   â”‚   â”‚   â””â”€â”€ repo.go                          # AssignmentRepository å®ç°
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ resource/
â”‚   â”‚   â”‚   â”œâ”€â”€ po.go                            # ResourcePO
â”‚   â”‚   â”‚   â”œâ”€â”€ mapper.go
â”‚   â”‚   â”‚   â””â”€â”€ repo.go                          # ResourceRepository å®ç°
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ policy/
â”‚   â”‚       â”œâ”€â”€ po.go                            # PolicyVersionPO
â”‚   â”‚       â”œâ”€â”€ mapper.go
â”‚   â”‚       â””â”€â”€ repo.go                          # PolicyVersionRepository å®ç°
â”‚   â”‚
â”‚   â”œâ”€â”€ casbin/                                  # Casbin ç­–ç•¥å¼•æ“å°è£…ï¼ˆPDPï¼‰
â”‚   â”‚   â”œâ”€â”€ model.conf                           # RBAC æ¨¡å‹å®šä¹‰
â”‚   â”‚   â”œâ”€â”€ adapter.go                           # CasbinAdapter å®ç°ï¼ˆPRP å†™å…¥ï¼‰
â”‚   â”‚   â””â”€â”€ enforcer.go                          # CachedEnforcer å°è£…ï¼ˆPDP å†³ç­–ï¼‰
â”‚   â”‚
â”‚   â””â”€â”€ redis/                                   # Redis å®ç°
â”‚       â””â”€â”€ version_pubsub.go                    # ç­–ç•¥ç‰ˆæœ¬å‘å¸ƒ/è®¢é˜…
â”‚
â”œâ”€â”€ interface/                                   # ğŸŒ æ¥å£å±‚ï¼ˆå¯¹å¤–æš´éœ²ï¼‰
â”‚   â”‚
â”‚   â”œâ”€â”€ restful/                                 # REST APIï¼ˆPAP ç®¡ç†æ¥å£ï¼‰
â”‚   â”‚   â”œâ”€â”€ router.go                            # è·¯ç”±æ³¨å†Œ
â”‚   â”‚   â”œâ”€â”€ handler_pap.go                       # PAP ç®¡ç† Handler
â”‚   â”‚   â”‚                                        #  - è§’è‰² CRUD
â”‚   â”‚   â”‚                                        #  - èµ‹æƒç®¡ç†
â”‚   â”‚   â”‚                                        #  - ç­–ç•¥ç®¡ç†
â”‚   â”‚   â”‚                                        #  - èµ„æºç›®å½•æŸ¥è¯¢
â”‚   â”‚   â”œâ”€â”€ handler_pdp.go                       # PDP å†³ç­–æ¥å£ï¼ˆå¯é€‰ï¼‰
â”‚   â”‚   â”‚                                        #  - /decide ç«¯ç‚¹
â”‚   â”‚   â””â”€â”€ dto/                                 # æ•°æ®ä¼ è¾“å¯¹è±¡
â”‚   â”‚       â”œâ”€â”€ role.go
â”‚   â”‚       â”œâ”€â”€ assignment.go
â”‚   â”‚       â”œâ”€â”€ policy.go
â”‚   â”‚       â””â”€â”€ resource.go
â”‚   â”‚
â”‚   â””â”€â”€ sdk/                                     # SDK å°è£…
â”‚       â””â”€â”€ go/pep/                              # PEP æ‰§è¡Œç‚¹ SDK
â”‚           â”œâ”€â”€ guard.go                         # DomainGuard æ ¸å¿ƒå°è£…
â”‚           â”‚                                    #  - Can().Read().All()
â”‚           â”‚                                    #  - Can().Read().Own(ownerID)
â”‚           â”œâ”€â”€ context.go                       # ä»ä¸Šä¸‹æ–‡æå–ç”¨æˆ·ä¿¡æ¯
â”‚           â””â”€â”€ middleware.go                    # Gin ä¸­é—´ä»¶ï¼ˆå¯é€‰ï¼‰
â”‚
â””â”€â”€ docs/                                        # ğŸ“š æ–‡æ¡£
    â”œâ”€â”€ README.md                                # å®Œæ•´æ¶æ„æ–‡æ¡£ï¼ˆæœ¬æ–‡ä»¶ï¼‰
    â”œâ”€â”€ resources.seed.yaml                      # èµ„æºç›®å½• seed æ•°æ®
    â””â”€â”€ policy_init.csv                          # åˆå§‹ç­–ç•¥ç¤ºä¾‹
```

## æ•°æ®åº“è¡¨

```text
authz_roles              # è§’è‰²å®šä¹‰è¡¨
authz_assignments        # ç”¨æˆ·/ç»„ â†” è§’è‰²èµ‹æƒè¡¨
authz_resources          # åŸŸå¯¹è±¡èµ„æºç›®å½•è¡¨
authz_policy_versions    # ç­–ç•¥ç‰ˆæœ¬è¡¨
casbin_rule              # Casbin æƒå¨ç­–ç•¥è¡¨ï¼ˆè‡ªåŠ¨ç®¡ç†ï¼‰
```

## è®¾è®¡æ¨¡å¼å¯¹ç…§

| å±‚æ¬¡ | æ¨¡å¼ | è¯´æ˜ |
|-----|------|------|
| **é¢†åŸŸå±‚** | DDD èšåˆæ ¹ | role, assignment, resource, policy å››ä¸ªèšåˆ |
| **ç«¯å£å±‚** | å…­è¾¹å½¢æ¶æ„ | port/driven å®šä¹‰ä»“å‚¨å’Œ Casbin æ¥å£ |
| **åŸºç¡€è®¾æ–½** | Adapter æ¨¡å¼ | MySQL å’Œ Casbin å®ç°å…·ä½“é€‚é…å™¨ |
| **åº”ç”¨å±‚** | ç”¨ä¾‹ç¼–æ’ | PAP ç­–ç•¥ç®¡ç†æœåŠ¡ |
| **æ¥å£å±‚** | API + SDK | REST API (PAP) + Go SDK (PEP) |

## æ¶æ„åˆ†å±‚å¯¹ç…§ (XACML æ¨¡å¼)

```text
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  PEP (Policy Enforcement Point)            â”‚  â† interface/sdk/go/pep/
â”‚  æ‰§è¡Œç‚¹ï¼šDomainGuard ä¸¤æ®µå¼æƒé™åˆ¤å®š        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â†“ Enforce
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  PDP (Policy Decision Point)                â”‚  â† infra/casbin/enforcer.go
â”‚  å†³ç­–ç‚¹ï¼šCachedEnforcer å¸ƒå°”åˆ¤å®š           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â†“ Query
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  PRP (Policy Retrieval Point)               â”‚  â† infra/mysql/ + casbin_rule
â”‚  å­˜å‚¨ç‚¹ï¼šMySQL é¢†åŸŸè¡¨ + Casbin ç­–ç•¥è¡¨      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â†‘ Write
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  PAP (Policy Administration Point)          â”‚  â† application/ + interface/restful/
â”‚  ç®¡ç†ç‚¹ï¼šè§’è‰²/èµ‹æƒ/ç­–ç•¥/èµ„æºç®¡ç† API       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## å…³é”®æ–‡ä»¶è¯´æ˜

### é¢†åŸŸå±‚ï¼ˆDomainï¼‰

- **role/role.go**: è§’è‰²å®ä½“ï¼ŒåŒ…å« `RoleID` å€¼å¯¹è±¡å’Œ `Key()` æ–¹æ³•ç”Ÿæˆ Casbin è§’è‰²æ ‡è¯†
- **assignment/assignment.go**: èµ‹æƒå®ä½“ï¼ŒåŒ…å« `SubjectKey()` å’Œ `RoleKey()` ç”Ÿæˆ g è§„åˆ™æ ‡è¯†
- **resource/resource.go**: èµ„æºå®ä½“ï¼Œå®šä¹‰åŸŸå¯¹è±¡ç±»å‹ï¼ˆå¦‚ `scale:form:*`ï¼‰
- **resource/action.go**: åŠ¨ä½œå€¼å¯¹è±¡ï¼Œé¢„å®šä¹‰æ ‡å‡†åŠ¨ä½œæšä¸¾ï¼ˆcreate, read_all, read_own ç­‰ï¼‰
- **policy/rule.go**: ç­–ç•¥è§„åˆ™å€¼å¯¹è±¡ï¼ˆPolicyRule å’Œ GroupingRuleï¼‰
- **policy/policy_version.go**: ç­–ç•¥ç‰ˆæœ¬å®ä½“ï¼Œç”¨äºç¼“å­˜å¤±æ•ˆé€šçŸ¥

### åŸºç¡€è®¾æ–½å±‚ï¼ˆInfraï¼‰

- **mysql/*/po.go**: æŒä¹…åŒ–å¯¹è±¡ï¼ˆPOï¼‰ï¼Œå¯¹åº”æ•°æ®åº“è¡¨ç»“æ„
- **mysql/*/mapper.go**: BO â†” PO è½¬æ¢å™¨ï¼Œå®ç°é¢†åŸŸå¯¹è±¡ä¸æŒä¹…åŒ–å¯¹è±¡äº’è½¬
- **mysql/*/repo.go**: Repository å®ç°ï¼Œç»§æ‰¿ `BaseRepository` æä¾› CRUD æ“ä½œ
- **casbin/model.conf**: Casbin RBAC æ¨¡å‹å®šä¹‰ï¼Œçº¯ç­‰å€¼åŒ¹é…ï¼Œæ”¯æŒåŸŸéš”ç¦»
- **casbin/adapter.go**: Casbin é€‚é…å™¨å°è£…ï¼Œå®ç° `CasbinPort` æ¥å£

### åº”ç”¨å±‚ï¼ˆApplicationï¼‰

- **role/service.go**: è§’è‰²ç®¡ç†æœåŠ¡ï¼ˆåˆ›å»ºã€æ›´æ–°ã€åˆ é™¤ã€æŸ¥è¯¢è§’è‰²ï¼‰
- **assignment/service.go**: èµ‹æƒç®¡ç†æœåŠ¡ï¼ˆæ·»åŠ /æ’¤é”€ g è§„åˆ™ï¼‰
- **policy/service.go**: ç­–ç•¥ç®¡ç†æœåŠ¡ï¼ˆæ·»åŠ /åˆ é™¤ p è§„åˆ™ï¼Œæ ¡éªŒèµ„æºå’ŒåŠ¨ä½œï¼‰
- **resource/service.go**: èµ„æºç›®å½•æœåŠ¡ï¼ˆç»´æŠ¤åŸŸå¯¹è±¡èµ„æºæ¸…å•ï¼‰
- **version/service.go**: ç‰ˆæœ¬ç®¡ç†æœåŠ¡ï¼ˆé€’å¢ç‰ˆæœ¬å·å¹¶å¹¿æ’­é€šçŸ¥ï¼‰

### æ¥å£å±‚ï¼ˆInterfaceï¼‰

- **restful/handler_pap.go**: PAP ç®¡ç† API Handlerï¼ˆè§’è‰²/èµ‹æƒ/ç­–ç•¥/èµ„æºçš„ CRUD æ¥å£ï¼‰
- **sdk/go/pep/guard.go**: DomainGuard æ ¸å¿ƒå®ç°ï¼Œæä¾›æµå¼ API è¿›è¡Œæƒé™åˆ¤å®š

  ```go
  guard.Can(ctx).Read("scale:form:*").All()      // åˆ¤æ–­å…¨å±€è¯»æƒé™
  guard.Can(ctx).Read("scale:form:*").Own(uid)   // åˆ¤æ–­æ‰€æœ‰è€…è¯»æƒé™
  ```

### æ–‡æ¡£ï¼ˆDocsï¼‰

- **README.md**: å®Œæ•´æ¶æ„æ–‡æ¡£ï¼ˆæ¶æ„å›¾ã€è®¾è®¡å†³ç­–ã€API ç¤ºä¾‹ã€ä½¿ç”¨æŒ‡å—ï¼‰
- **resources.seed.yaml**: èµ„æºç›®å½•åˆå§‹åŒ–æ•°æ®ï¼ˆå®šä¹‰æ‰€æœ‰åŸŸå¯¹è±¡åŠå…¶å…è®¸çš„åŠ¨ä½œï¼‰
- **policy_init.csv**: ç­–ç•¥ç¤ºä¾‹æ•°æ®ï¼ˆp è§„åˆ™å’Œ g è§„åˆ™çš„åˆå§‹é…ç½®ï¼‰

## å·¥ä½œæµç¨‹

### ç­–ç•¥ç®¡ç†æµç¨‹ï¼ˆPAPï¼‰

1. **åˆ›å»ºè§’è‰²**: `POST /authz/roles` â†’ `application/role/service.go` â†’ `infra/mysql/role/repo.go`
2. **æ·»åŠ ç­–ç•¥**: `POST /authz/policies` â†’ `application/policy/service.go` â†’ `infra/casbin/adapter.go` â†’ `casbin_rule` è¡¨
3. **ç”¨æˆ·èµ‹æƒ**: `POST /authz/assignments` â†’ `application/assignment/service.go` â†’ `infra/casbin/adapter.go` (g è§„åˆ™)
4. **ç‰ˆæœ¬é€’å¢**: ç­–ç•¥å˜æ›´ â†’ `application/version/service.go` â†’ `policy_version++` â†’ Redis Pub/Sub å¹¿æ’­

### æƒé™åˆ¤å®šæµç¨‹ï¼ˆPEP â†’ PDPï¼‰

```go
// ä¸šåŠ¡æœåŠ¡ç”¨ä¾‹ä¸­
func (uc *FormUseCase) GetForm(ctx context.Context, id uint64) (*Form, error) {
    // 1. PEP å‘èµ·åˆ¤å®š
    if uc.guard.Can(ctx).Read("scale:form:*").All() {
        // 2. PDP (Enforcer) æŸ¥è¯¢ PRP (casbin_rule)
        // 3. å‘½ä¸­ç¼“å­˜æˆ–ä»æ•°æ®åº“åŠ è½½
        // 4. è¿”å›åˆ¤å®šç»“æœï¼šå…è®¸
        return uc.repo.FindByID(ctx, id)
    }
    
    // 5. å…¨å±€æƒé™ä¸é€šè¿‡ï¼Œå°è¯•æ‰€æœ‰è€…æƒé™
    userID := auth.GetUserID(ctx)
    if uc.guard.Can(ctx).Read("scale:form:*").Own(userID) {
        form, _ := uc.repo.FindByID(ctx, id)
        if form.OwnerID == userID {
            return form, nil
        }
    }
    
    return nil, ErrForbidden
}
```

### ç¼“å­˜åˆ·æ–°æµç¨‹

1. **ç­–ç•¥å˜æ›´**: PAP ä¿®æ”¹ç­–ç•¥ â†’ `policy_version` è¡¨é€’å¢
2. **å¹¿æ’­é€šçŸ¥**: `version/service.go` â†’ Redis Pub `authz:policy_changed` æ¶ˆæ¯
3. **è®¢é˜…æ¥æ”¶**: å„ä¸šåŠ¡æœåŠ¡ Redis Sub æ”¶åˆ°é€šçŸ¥
4. **æ¸…é™¤ç¼“å­˜**: è°ƒç”¨ `CasbinAdapter.InvalidateCache()` æ¸…é™¤ Enforcer ç¼“å­˜
5. **ä¸‹æ¬¡æŸ¥è¯¢**: é‡æ–°ä» `casbin_rule` åŠ è½½æœ€æ–°ç­–ç•¥

## ä¾èµ–å…³ç³»

```text
interface/restful/    â†’  application/         â†’  domain/
                         infra/mysql/         â†’  domain/port/driven/
interface/sdk/pep/    â†’  infra/casbin/        â†’  domain/policy/port/driven/
                         infra/redis/
```

- **interface å±‚**ä¾èµ– **application å±‚**å’Œ **infra å±‚**
- **application å±‚**ä¾èµ– **domain å±‚ç«¯å£**
- **infra å±‚**å®ç° **domain å±‚ç«¯å£**æ¥å£
- **domain å±‚**é›¶ä¾èµ–ï¼ˆçº¯ä¸šåŠ¡é€»è¾‘ï¼‰

## V1 å…³é”®çº¦æŸ

1. âœ… èµ„æºä»…é™"åŸŸå¯¹è±¡ç±»å‹"ï¼ˆå¦‚ `scale:form:*`ï¼‰ï¼Œæ— å®ä¾‹çº§æƒé™
2. âœ… åŠ¨ä½œèŒƒå›´ç¼–ç è¿›åŠ¨ä½œåï¼ˆ`read_all` / `read_own`ï¼‰ï¼Œé¿å… ABAC å¤æ‚æ€§
3. âœ… æ‰€æœ‰è€…åˆ¤æ–­åœ¨ä¸šåŠ¡æœåŠ¡å†…å®Œæˆï¼ˆä¸¤æ®µå¼åˆ¤å®šï¼‰
4. âœ… ä¸åŒ…å«èœå•/å‰ç«¯è·¯ç”±ç®¡ç†
5. âœ… ä¸åŒ…å« API è·¯ç”±è‡ªåŠ¨æ‰«æä¸æ³¨å†Œ

## åç»­æ¼”è¿›è·¯å¾„

- **V1.1**: æ·»åŠ å®¡è®¡æ—¥å¿—ï¼ˆç­–ç•¥å˜æ›´è®°å½•ã€åˆ¤å®šå¤±è´¥é‡‡æ ·ï¼‰
- **V1.2**: æä¾›è½»é‡ PDP å†³ç­–æœåŠ¡ï¼ˆ`/v1/decide` REST APIï¼‰
- **V2.0**: æ”¯æŒ ABACï¼ˆå±æ€§æ¡ä»¶åˆ¤æ–­ï¼‰ã€èœå•ç®¡ç†ã€API æ‰«æ

---

**å‚è€ƒ**: æœ¬ç›®å½•æ ‘éµå¾ª `authn` æ¨¡å—çš„å…­è¾¹å½¢æ¶æ„é£æ ¼ï¼Œé¢†åŸŸå¯¹è±¡ä¸æŒä¹…åŒ–å¯¹è±¡åˆ†ç¦»ï¼Œä½¿ç”¨ Port/Adapter æ¨¡å¼å®ç°ä¾èµ–å€’ç½®ã€‚

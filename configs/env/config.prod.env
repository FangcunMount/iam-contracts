# Database Environment Configuration for iam contracts System
# 数据库环境配置文件

# MySQL配置（生产使用云 RDS 内网地址）
MYSQL_HOST=your-rds.mysql.rds.aliyuncs.com
MYSQL_PORT=3306
MYSQL_USERNAME=iam
MYSQL_PASSWORD=PLEASE_CHANGE_ME
MYSQL_DATABASE=iam_contracts
MYSQL_DBNAME=iam_contracts

# Redis 配置（双实例架构）
# Cache Redis - 用于缓存、会话、限流等临时数据
REDIS_CACHE_HOST=redis-cache
REDIS_CACHE_PORT=6379
REDIS_CACHE_USERNAME=
REDIS_CACHE_PASSWORD=
REDIS_CACHE_DB=0

# Store Redis - 用于持久化存储、队列、发布订阅等关键数据
REDIS_STORE_HOST=your-redis.redis.rds.aliyuncs.com
REDIS_STORE_PORT=6379
REDIS_STORE_USERNAME=
REDIS_STORE_PASSWORD=
REDIS_STORE_DB=1

# JWT 签名使用 JWKS (RS256) 非对称密钥，自动生成并持久化到 /app/data/keys

# IDP模块加密密钥（32字节，用于加密敏感信息如微信AppSecret）
# ⚠️ 必须与 GitHub Secrets 中的 IPD_ENCRYPTION_KEY 保持一致
# ⚠️ 如果不设置，将使用默认密钥（仅用于开发环境）
# IAM_APISERVER_IDP_ENCRYPTION_KEY=your-key-here

# Docker网络配置
DOCKER_NETWORK_NAME=infra-network

# 时区配置
TZ=Asia/Shanghai

# 数据路径配置
MYSQL_DATA_PATH=/data/mysql/iam-contracts/data
MYSQL_LOGS_PATH=/data/logs/iam-contracts/mysql
REDIS_DATA_PATH=/data/redis/iam-contracts/data
REDIS_LOGS_PATH=/data/logs/iam-contracts/redis

# =============================================================================
# 备份配置
# =============================================================================
BACKUP_PATH=/data/backups/iam-contracts
BACKUP_RETENTION_DAYS=30

# =============================================================================
# 应用配置
# =============================================================================
APP_ENV=production
APP_DEBUG=false 

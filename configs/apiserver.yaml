# web-framework 全配置
# 包含所有配置项的完整配置文件
# 适用于生产环境和复杂开发环境

# RESTful 服务配置
server:
  mode: "debug" # 运行模式：debug, release, test
  healthz: true # 是否启用健康检查
  middlewares: # 中间件列表
    - recovery
    - enhanced_logger
    - cors

# GRPC 服务配置
grpc:
  bind-address: "127.0.0.1" # GRPC 服务绑定地址
  bind-port: 9090 # GRPC 服务端口
  healthz-port: 9091 # GRPC 健康检查端口

# 不安全服务配置（HTTP）
insecure:
  bind-address: "127.0.0.1" # HTTP 服务绑定地址
  bind-port: 8080 # HTTP 服务端口

# 安全服务配置（HTTPS）
secure:
  bind-address: "127.0.0.1" # HTTPS 服务绑定地址
  bind-port: 9444 # HTTPS 服务端口
  tls:
    cert-file: "configs/cert/web-apiserver.crt" # TLS 证书文件路径
    private-key-file: "configs/cert/web-apiserver.key" # TLS 私钥文件路径

# MySQL 数据库配置
mysql:
  host: "127.0.0.1:3306" # MySQL 服务器地址
  username: "web_app_user" # 数据库用户名
  password: "web_app_password_2024" # 数据库密码
  database: "web_framework" # 数据库名称
  max-idle-connections: 10 # 最大空闲连接数
  max-open-connections: 100 # 最大打开连接数
  max-connection-life-time: 1h # 连接最大生存时间
  log-level: 4 # 日志级别 (1=Silent, 2=Error, 3=Warn, 4=Info)

# Redis 数据库配置
redis:
  host: "127.0.0.1" # Redis 服务器地址
  port: 6379 # Redis 端口
  password: "web_redis_2024" # Redis 密码
  database: 0 # Redis 数据库编号
  max-idle: 50 # 最大空闲连接数
  max-active: 100 # 最大活跃连接数
  timeout: 5s # 连接超时时间

# 日志配置
log:
  level: info # 日志级别：debug, info, warn, error, fatal, panic
  format: console # 日志格式：console, json
  enable-color: true # 是否开启颜色
  disable-caller: false # 是否禁用调用者
  disable-stacktrace: false # 是否禁用堆栈跟踪
  development: false # 是否为开发环境
  output-paths:
    - /data/logs/web/web-apiserver.log
    - stdout # 输出路径
  error-output-paths:
    - /data/logs/web/web-apiserver-error.log
    - stderr # 错误输出路径
  max-size: 100 # 单个日志文件最大大小（MB）
  max-age: 30 # 保留旧日志文件的最大天数
  max-backups: 10 # 保留旧日志文件的最大数量
  compress: true # 是否压缩旧日志文件

# JWT 配置
jwt:
  key: "web-framework-jwt-secret-key-2024" # JWT 签名密钥（生产环境请使用更强的密钥）
  timeout: 24h # Token 有效期（24小时）
  max-refresh: 168h # 最大刷新时间（7天）
  realm: web-framework # JWT 领域名称
app:
  name: "iam"
  version: "1.0.0"
  mode: "development"  # development, production

# æœåŠ¡å™¨é…ç½®
server:
  name: "iam"
  address: "0.0.0.0"
  port: 8080  # æ ‡å‡†ç«¯å£
  port-ssl: 8443  # HTTPS ç«¯å£
  read-timeout: 60    # ç§’
  write-timeout: 60   # ç§’
  run-mode: "debug"   # Gin å¼€å‘æ¨¡å¼: debug, release, test

# MySQL é…ç½®
mysql:
  host: "127.0.0.1:3306"
  username: "root"
  password: "REDACTED_DEV_ROOT"  # å¯¹åº” infra MYSQL_ROOT_PASSWORD
  database: "iam_contracts"
  max-idle-conns: 10
  max-open-conns: 100
  conn-max-lifetime: 3600  # ç§’
  log-level: 4 # GORM log level, 1: silent, 2:error, 3:warn, 4:info (å¼€å‘ç¯å¢ƒä½¿ç”¨ info)

# æ•°æ®åº“è¿ç§»é…ç½®
migration:
  enabled: true  # å¼€å‘ç¯å¢ƒå¯ç”¨è‡ªåŠ¨è¿ç§»
  autoseed: true  # å¼€å‘ç¯å¢ƒè‡ªåŠ¨åŠ è½½ç§å­æ•°æ®
  database: "iam_contracts"

# Redis é…ç½®ï¼ˆåŒå®ä¾‹æ¶æ„ï¼‰
redis:
  # Cache Redis - ç”¨äºç¼“å­˜ã€ä¼šè¯ã€é™æµç­‰ä¸´æ—¶æ•°æ®ï¼ˆç«¯å£ 6379ï¼‰
  cache:
    host: "127.0.0.1"
    port: 6379
    password: "REDACTED_REDIS_CACHE"  # ä¸ infra REDIS_CACHE_PASSWORD ä¸€è‡´
    database: 0  # Cache ä½¿ç”¨ DB 0
    max-idle: 50
    max-active: 100
    timeout: 5
    enable-cluster: false
    use-ssl: false
  
  # Store Redis (Auth) - ç”¨äºæŒä¹…åŒ–å­˜å‚¨ã€é˜Ÿåˆ—ã€å‘å¸ƒè®¢é˜…ç­‰ï¼ˆç«¯å£ 6380ï¼‰
  store:
    host: "127.0.0.1"
    port: 6380
    password: "REDACTED_REDIS_AUTH"  # ä¸ infra REDIS_AUTH_PASSWORD ä¸€è‡´
    database: 0  # Auth å®ä¾‹ä½¿ç”¨ DB 0ï¼ˆå•ç‹¬å®ä¾‹ä¸éœ€è¦ä¸åŒ DBï¼‰
    max-idle: 50
    max-active: 100
    timeout: 5
    enable-cluster: false
    use-ssl: false

# æ—¥å¿—é…ç½®ï¼ˆä½¿ç”¨ component-base v0.2.7 æœ€æ–°åŠŸèƒ½ï¼‰
log:
  # åŸºç¡€é…ç½®
  disable-caller: false        # å¼€å‘ç¯å¢ƒæ˜¾ç¤ºè°ƒç”¨è€…ä¿¡æ¯
  disable-stacktrace: false    # å¼€å‘ç¯å¢ƒæ˜¾ç¤ºå †æ ˆ
  level: debug                 # å¼€å‘ç¯å¢ƒä½¿ç”¨ debug çº§åˆ«
  format: console              # æ§åˆ¶å°æ ¼å¼ï¼ˆconsole/jsonï¼‰
  enable-color: true           # ğŸ¨ å¯ç”¨å½©è‰²è¾“å‡ºï¼ˆv0.2.7 æ–°åŠŸèƒ½ï¼‰
  development: true            # å¼€å‘æ¨¡å¼
  
  # è¾“å‡ºè·¯å¾„
  output-paths: 
    - stdout                   # æ§åˆ¶å°è¾“å‡º
    - logs/iam-apiserver.log   # æ–‡ä»¶è¾“å‡º
  error-output-paths: 
    - stderr
    - logs/iam-apiserver-error.log
  
  # ğŸ“Š æ—¥å¿—è½®è½¬é…ç½®ï¼ˆæŒ‰å¤§å°ï¼‰
  max-size: 100                # å•ä¸ªæ—¥å¿—æ–‡ä»¶æœ€å¤§å¤§å°ï¼ˆMBï¼‰
  max-age: 7                   # ä¿ç•™ 7 å¤©
  max-backups: 10              # ä¿ç•™ 10 ä¸ªå¤‡ä»½æ–‡ä»¶
  compress: true               # å‹ç¼©æ—§æ–‡ä»¶
  
  # â° æŒ‰æ—¶é—´è½®è½¬ï¼ˆå¯é€‰ï¼Œä¸å¤§å°è½®è½¬äºŒé€‰ä¸€ï¼‰
  enable-time-rotation: false  # å¼€å‘ç¯å¢ƒæš‚ä¸å¯ç”¨
  time-rotation-format: "2006-01-02"  # æŒ‰å¤©è½®è½¬æ ¼å¼
  
  # ğŸ¯ åˆ†çº§è¾“å‡ºï¼ˆv0.2.7 æ ¸å¿ƒåŠŸèƒ½ï¼‰
  enable-level-output: true    # å¯ç”¨åˆ†çº§è¾“å‡º
  level-output-mode: "above"   # è¾“å‡ºæ¨¡å¼ï¼šabove=è¯¥çº§åˆ«åŠä»¥ä¸Šï¼Œexact=ä»…è¯¥çº§åˆ«
  level-output-paths:
    debug: 
      - stdout                 # DEBUG è¾“å‡ºåˆ°æ§åˆ¶å°ï¼ˆå½©è‰²ï¼‰
    info: 
      - stdout                 # INFO è¾“å‡ºåˆ°æ§åˆ¶å°ï¼ˆå½©è‰²ï¼‰
      - logs/iam-apiserver.log # INFO åŠä»¥ä¸Šè®°å½•åˆ°æ–‡ä»¶
    warn:
      - logs/iam-warn.log      # WARN åŠä»¥ä¸Šå•ç‹¬è®°å½•
    error:
      - logs/iam-error.log     # ERROR å•ç‹¬è®°å½•ï¼ˆä¾¿äºå¿«é€Ÿå®šä½é—®é¢˜ï¼‰

# JWT é…ç½®
jwt:
  secret: "dev-secret-key-change-in-production"  # å¼€å‘ç¯å¢ƒå¯†é’¥
  expire: 86400  # 24å°æ—¶

# CORS é…ç½®ï¼ˆå¼€å‘ç¯å¢ƒå…è®¸æ‰€æœ‰æ¥æºï¼‰
cors:
  allowed-origins:
    - "*"
  allowed-methods:
    - "GET"
    - "POST"
    - "PUT"
    - "DELETE"
    - "OPTIONS"
    - "PATCH"
  allowed-headers:
    - "Content-Type"
    - "Authorization"
    - "X-Requested-With"

# HTTPS/TLS é…ç½®ï¼ˆä½¿ç”¨è‡ªç­¾åè¯ä¹¦ï¼‰
tls:
  cert: configs/cert/web-apiserver.crt
  key: configs/cert/web-apiserver.key
  strict: false  # å¼€å‘ç¯å¢ƒä¸ä¸¥æ ¼éªŒè¯

insecure:
  bind-address: 0.0.0.0
  bind-port: 8080

secure:
  bind-address: 0.0.0.0
  bind-port: 8443
  tls:
    cert-file: configs/cert/web-apiserver.crt
    private-key-file: configs/cert/web-apiserver.key
